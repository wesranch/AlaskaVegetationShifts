#select model and predict
model <- models[[paste0("final_fit_", gsub(" ", "_", spp))]]
prediction <- predict(model, validation_df)
observed <- validation_df$Biogm2
prediction_vals <- prediction[[1]]
#rbind
plot_df <- rbind(data.frame(Observed=observed, Predicted=prediction_vals, Species=spp))
#plot
validation_plot <- ggplot(plot_df, aes(x = Predicted, y = Observed, color = abs(Observed-Predicted))) +
geom_smooth(method = "lm", color = "black", linetype = "solid", se = FALSE)+
geom_point(size = 7, alpha = .9, shape = 16) +
geom_abline(slope = 1, intercept = 0, linetype = "dashed") +
scale_color_viridis(option = "mako", direction=1)+
#facet_grid(~ Species, nrow(1)) +
theme_bw(base_family = "Times New Roman") +
scale_x_continuous(limits=c(0,500))+
scale_y_continuous(limits=c(0,500))+
labs(x = "Biomass Predicted", y = "Biomass Observed", title = paste0(spp)) +
theme(axis.text = element_text(color = "black", size = 14),
axis.text.x = element_text(color = "black", size = 14),
plot.title = element_text(color = "black", size = 20),
axis.title.y = element_text(color = "black", size = 18),
axis.title.x = element_text(color = "black", size = 18, vjust = -.25),
strip.text = element_text(color = "black", size = 12),
legend.position = "none",
panel.grid.major = element_line(color = "gray70", linewidth = .25),
panel.grid.minor = element_blank())
plots[[spp]] <- validation_plot
}
plots <- list()
for (spp in species){
df <- training_df_all_spp %>% filter(Species == spp)
split_data <- initial_split(df, prop = 0.70, strata = all_of("Biogm2"))
validation_df <- testing(split_data)
#select model and predict
model <- models[[paste0("final_fit_", gsub(" ", "_", spp))]]
prediction <- predict(model, validation_df)
observed <- validation_df$Biogm2
prediction_vals <- prediction[[1]]
#rbind
plot_df <- rbind(data.frame(Observed=observed, Predicted=prediction_vals, Species=spp))
#plot
validation_plot <- ggplot(plot_df, aes(x = Predicted, y = Observed, color = abs(Observed-Predicted))) +
geom_smooth(method = "lm", color = "black", linetype = "solid", se = FALSE)+
geom_point(size = 7, alpha = .9, shape = 16) +
geom_abline(slope = 1, intercept = 0, linetype = "dashed") +
scale_color_viridis(option = "mako", direction=1)+
#facet_grid(~ Species, nrow(1)) +
theme_bw(base_family = "Times New Roman") +
scale_x_continuous(limits=c(0,500))+
scale_y_continuous(limits=c(0,500))+
labs(x = "Biomass Predicted", y = "Biomass Observed", title = paste0(spp)) +
theme(axis.text = element_text(color = "black", size = 14),
axis.text.x = element_text(color = "black", size = 14),
plot.title = element_text(color = "black", size = 20),
axis.title.y = element_text(color = "black", size = 18),
axis.title.x = element_text(color = "black", size = 18, vjust = -.25),
strip.text = element_text(color = "black", size = 12),
legend.position = "none",
panel.grid.major = element_line(color = "gray70", linewidth = .25),
panel.grid.minor = element_blank())
plots[[spp]] <- validation_plot
}
#patchwork the plots
reduced_plots <- reduce(plots, "/")
reduced_plots
library(patchwork)
#patchwork the plots
reduced_plots <- reduce(plots, "/")
reduced_plots
#patchwork the plots
final_plot <- wrap_plots(plots, nrow = 2)
print(final_plot)
for (spp in species){
df <- training_df_all_spp %>% filter(Species == spp)
split_data <- initial_split(df, prop = 0.70, strata = all_of("Biogm2"))
validation_df <- testing(split_data)
#select model and predict
model <- models[[paste0("final_fit_", gsub(" ", "_", spp))]]
prediction <- predict(model, validation_df)
observed <- validation_df$Biogm2
prediction_vals <- prediction[[1]]
#rbind
plot_df <- rbind(data.frame(Observed=observed, Predicted=prediction_vals, Species=spp))
plot_dfs[[spp]] <- plot_df
}
plot_dfs <- list()
for (spp in species){
df <- training_df_all_spp %>% filter(Species == spp)
split_data <- initial_split(df, prop = 0.70, strata = all_of("Biogm2"))
validation_df <- testing(split_data)
#select model and predict
model <- models[[paste0("final_fit_", gsub(" ", "_", spp))]]
prediction <- predict(model, validation_df)
observed <- validation_df$Biogm2
prediction_vals <- prediction[[1]]
#rbind
plot_df <- rbind(data.frame(Observed=observed, Predicted=prediction_vals, Species=spp))
plot_dfs[[spp]] <- plot_df
}
plot_df
for (spp in species){
df <- training_df_all_spp %>% filter(Species == spp)
split_data <- initial_split(df, prop = 0.70, strata = all_of("Biogm2"))
validation_df <- testing(split_data)
#select model and predict
model <- models[[paste0("final_fit_", gsub(" ", "_", spp))]]
prediction <- predict(model, validation_df)
observed <- validation_df$Biogm2
prediction_vals <- prediction[[1]]
#rbind
plot_df <- rbind(data.frame(Observed=observed, Predicted=prediction_vals, Species=display_names[[spp]]))
plot_dfs[[spp]] <- plot_df
}
# iterable list
species <- c("black spruce", "white spruce", "resin birch", "quaking aspen")
display_names <- c("Black spruce", "White spruce", "Alaskan birch", "Trembling aspen")
names(display_names) <- species
plot_dfs <- list()
for (spp in species){
df <- training_df_all_spp %>% filter(Species == spp)
split_data <- initial_split(df, prop = 0.70, strata = all_of("Biogm2"))
validation_df <- testing(split_data)
#select model and predict
model <- models[[paste0("final_fit_", gsub(" ", "_", spp))]]
prediction <- predict(model, validation_df)
observed <- validation_df$Biogm2
prediction_vals <- prediction[[1]]
#rbind
plot_df <- rbind(data.frame(Observed=observed, Predicted=prediction_vals, Species=display_names[[spp]]))
plot_dfs[[spp]] <- plot_df
}
plot_dfs
main_plot_df <- do.call(rbind, plot_dfs)
#plot
validation_plot <- ggplot(main_plot_df, aes(x = Predicted, y = Observed, color = abs(Observed-Predicted))) +
geom_smooth(method = "lm", color = "black", linetype = "solid", se = FALSE)+
geom_point(size = 5, alpha = .9, shape = 16) +
geom_abline(slope = 1, intercept = 0, linetype = "dashed") +
scale_color_viridis(option = "mako", direction=1)+
facet_grid(~ Species) +
theme_bw(base_family = "Times New Roman") +
scale_x_continuous(limits=c(0,500))+
scale_y_continuous(limits=c(0,500))+
labs(x = "Biomass Predicted", y = "Biomass Observed", title = paste0(spp)) +
theme(axis.text = element_text(color = "black", size = 14),
axis.text.x = element_text(color = "black", size = 14),
plot.title = element_text(color = "black", size = 20),
axis.title.y = element_text(color = "black", size = 18),
axis.title.x = element_text(color = "black", size = 18, vjust = -.25),
strip.text = element_text(color = "black", size = 12),
legend.position = "none",
panel.grid.major = element_line(color = "gray70", linewidth = .25),
panel.grid.minor = element_blank())
validation_plot
#plot
validation_plot <- ggplot(main_plot_df, aes(x = Predicted, y = Observed, color = abs(Observed-Predicted))) +
geom_smooth(method = "lm", color = "black", linetype = "solid", se = FALSE)+
geom_point(size = 5, alpha = .9, shape = 16) +
geom_abline(slope = 1, intercept = 0, linetype = "dashed") +
scale_color_viridis(option = "mako", direction=1)+
facet_wrap(~ Species) +
theme_bw(base_family = "Times New Roman") +
scale_x_continuous(limits=c(0,500))+
scale_y_continuous(limits=c(0,500))+
labs(x = "Biomass Predicted", y = "Biomass Observed", title = paste0(spp)) +
theme(axis.text = element_text(color = "black", size = 14),
axis.text.x = element_text(color = "black", size = 14),
plot.title = element_text(color = "black", size = 20),
axis.title.y = element_text(color = "black", size = 18),
axis.title.x = element_text(color = "black", size = 18, vjust = -.25),
strip.text = element_text(color = "black", size = 12),
legend.position = "none",
panel.grid.major = element_line(color = "gray70", linewidth = .25),
panel.grid.minor = element_blank())
validation_plot
#plot
validation_plot <- ggplot(main_plot_df, aes(x = Predicted, y = Observed, color = abs(Observed-Predicted))) +
geom_smooth(method = "lm", color = "black", linetype = "solid", se = FALSE)+
geom_point(size = 5, alpha = .9, shape = 16) +
geom_abline(slope = 1, intercept = 0, linetype = "dashed") +
scale_color_viridis(option = "mako", direction=1)+
facet_wrap(~ Species) +
theme_bw(base_family = "Times New Roman") +
scale_x_continuous(limits=c(0,500))+
scale_y_continuous(limits=c(0,500))+
labs(x = "Biomass Predicted", y = "Biomass Observed", title = paste0(spp)) +
theme(axis.text = element_text(color = "black", size = 14),
axis.text.x = element_text(color = "black", size = 14),
plot.title = element_text(color = "black", size = 20),
axis.title.y = element_text(color = "black", size = 18),
axis.title.x = element_text(color = "black", size = 18, vjust = -.25),
strip.text = element_text(color = "black", size = 13),
legend.position = "none",
panel.grid.major = element_line(color = "gray70", linewidth = .25),
panel.grid.minor = element_blank())
validation_plot
#plot
validation_plot <- ggplot(main_plot_df, aes(x = Predicted, y = Observed, color = abs(Observed-Predicted))) +
geom_smooth(method = "lm", color = "black", linetype = "solid", se = FALSE)+
geom_point(size = 5, alpha = .9, shape = 16) +
geom_abline(slope = 1, intercept = 0, linetype = "dashed") +
scale_color_viridis(option = "mako", direction=1)+
facet_wrap(~ Species) +
theme_bw(base_family = "Times New Roman") +
scale_x_continuous(limits=c(0,500))+
scale_y_continuous(limits=c(0,500))+
labs(x = "Biomass Predicted", y = "Biomass Observed") +
theme(axis.text = element_text(color = "black", size = 14),
axis.text.x = element_text(color = "black", size = 14),
plot.title = element_text(color = "black", size = 20),
axis.title.y = element_text(color = "black", size = 18),
axis.title.x = element_text(color = "black", size = 18, vjust = -.25),
strip.text = element_text(color = "black", size = 13),
legend.position = "none",
panel.grid.major = element_line(color = "gray70", linewidth = .25),
panel.grid.minor = element_blank())
validation_plot
#plot
validation_plot <- ggplot(main_plot_df, aes(x = Predicted, y = Observed, color = abs(Observed-Predicted))) +
geom_smooth(method = "lm", color = "black", linetype = "solid", se = FALSE)+
geom_point(size = 5, alpha = .75, shape = 16) +
geom_abline(slope = 1, intercept = 0, linetype = "dashed") +
scale_color_viridis(option = "mako", direction=1)+
facet_wrap(~ Species) +
theme_bw(base_family = "Times New Roman") +
scale_x_continuous(limits=c(0,500))+
scale_y_continuous(limits=c(0,500))+
labs(x = "Biomass Predicted", y = "Biomass Observed") +
theme(axis.text = element_text(color = "black", size = 14),
axis.text.x = element_text(color = "black", size = 14),
plot.title = element_text(color = "black", size = 20),
axis.title.y = element_text(color = "black", size = 18),
axis.title.x = element_text(color = "black", size = 18, vjust = -.25),
strip.text = element_text(color = "black", size = 13),
legend.position = "none",
panel.grid.major = element_line(color = "gray70", linewidth = .25),
panel.grid.minor = element_blank())
validation_plot
#plot
validation_plot <- ggplot(main_plot_df, aes(x = Predicted, y = Observed, color = abs(Observed-Predicted))) +
geom_smooth(method = "lm", color = "black", linetype = "solid", se = FALSE)+
geom_point(size = 5, alpha = .75, shape = 16) +
geom_abline(slope = 1, intercept = 0, linetype = "dashed") +
scale_color_viridis(option = "mako", direction=1)+
facet_wrap(~ Species) +
theme_bw(base_family = "Times New Roman") +
#scale_x_continuous(limits=c(0,500))+
#scale_y_continuous(limits=c(0,500))+
labs(x = "Biomass Predicted", y = "Biomass Observed") +
theme(axis.text = element_text(color = "black", size = 14),
axis.text.x = element_text(color = "black", size = 14),
plot.title = element_text(color = "black", size = 20),
axis.title.y = element_text(color = "black", size = 18),
axis.title.x = element_text(color = "black", size = 18, vjust = -.25),
strip.text = element_text(color = "black", size = 13),
legend.position = "none",
panel.grid.major = element_line(color = "gray70", linewidth = .25),
panel.grid.minor = element_blank())
validation_plot
#plot
validation_plot <- ggplot(main_plot_df, aes(x = Predicted, y = Observed, color = abs(Observed-Predicted))) +
geom_smooth(method = "lm", color = "black", linetype = "solid", se = FALSE)+
geom_point(size = 5, alpha = .75, shape = 16) +
geom_abline(slope = 1, intercept = 0, linetype = "dashed") +
scale_color_viridis(option = "mako", direction=1)+
facet_wrap(~ Species) +
theme_bw(base_family = "Times New Roman") +
scale_x_continuous(limits=c(0,2000))+
scale_y_continuous(limits=c(0,2000))+
labs(x = "Biomass Predicted", y = "Biomass Observed") +
theme(axis.text = element_text(color = "black", size = 14),
axis.text.x = element_text(color = "black", size = 14),
plot.title = element_text(color = "black", size = 20),
axis.title.y = element_text(color = "black", size = 18),
axis.title.x = element_text(color = "black", size = 18, vjust = -.25),
strip.text = element_text(color = "black", size = 13),
legend.position = "none",
panel.grid.major = element_line(color = "gray70", linewidth = .25),
panel.grid.minor = element_blank())
validation_plot
#plot
validation_plot <- ggplot(main_plot_df, aes(x = Predicted, y = Observed, color = abs(Observed-Predicted))) +
geom_smooth(method = "lm", color = "red", linetype = "solid", se = FALSE)+
geom_point(size = 5, alpha = .75, shape = 16) +
geom_abline(slope = 1, intercept = 0, linetype = "dashed") +
scale_color_viridis(option = "mako", direction=1)+
facet_wrap(~ Species) +
theme_bw(base_family = "Times New Roman") +
scale_x_continuous(limits=c(0,2000))+
scale_y_continuous(limits=c(0,2000))+
labs(x = "Biomass Predicted", y = "Biomass Observed") +
theme(axis.text = element_text(color = "black", size = 14),
axis.text.x = element_text(color = "black", size = 14),
plot.title = element_text(color = "black", size = 20),
axis.title.y = element_text(color = "black", size = 18),
axis.title.x = element_text(color = "black", size = 18, vjust = -.25),
strip.text = element_text(color = "black", size = 13),
legend.position = "none",
panel.grid.major = element_line(color = "gray70", linewidth = .25),
panel.grid.minor = element_blank())
validation_plot
#plot
validation_plot <- ggplot(main_plot_df, aes(x = Predicted, y = Observed, color = abs(Observed-Predicted))) +
geom_point(size = 5, alpha = .75, shape = 16) +
geom_smooth(method = "lm", color = "red", linetype = "solid", se = FALSE)+
geom_abline(slope = 1, intercept = 0, linetype = "dashed") +
scale_color_viridis(option = "mako", direction=1)+
facet_wrap(~ Species) +
theme_bw(base_family = "Times New Roman") +
scale_x_continuous(limits=c(0,2000))+
scale_y_continuous(limits=c(0,2000))+
labs(x = "Biomass Predicted", y = "Biomass Observed") +
theme(axis.text = element_text(color = "black", size = 14),
axis.text.x = element_text(color = "black", size = 14),
plot.title = element_text(color = "black", size = 20),
axis.title.y = element_text(color = "black", size = 18),
axis.title.x = element_text(color = "black", size = 18, vjust = -.25),
strip.text = element_text(color = "black", size = 13),
legend.position = "none",
panel.grid.major = element_line(color = "gray70", linewidth = .25),
panel.grid.minor = element_blank())
validation_plot
#plot
validation_plot <- ggplot(main_plot_df, aes(x = Predicted, y = Observed, color = abs(Observed-Predicted))) +
geom_point(size = 5, alpha = .75, shape = 16) +
geom_smooth(method = "lm", color = "black", linetype = "solid", se = FALSE)+
geom_abline(slope = 1, intercept = 0, linetype = "dashed") +
scale_color_viridis(option = "mako", direction=1)+
facet_wrap(~ Species) +
theme_bw(base_family = "Times New Roman") +
scale_x_continuous(limits=c(0,2000))+
scale_y_continuous(limits=c(0,2000))+
labs(x = "Biomass Predicted", y = "Biomass Observed") +
theme(axis.text = element_text(color = "black", size = 14),
axis.text.x = element_text(color = "black", size = 14),
plot.title = element_text(color = "black", size = 20),
axis.title.y = element_text(color = "black", size = 18),
axis.title.x = element_text(color = "black", size = 18, vjust = -.25),
strip.text = element_text(color = "black", size = 13),
legend.position = "none",
panel.grid.major = element_line(color = "gray70", linewidth = .25),
panel.grid.minor = element_blank())
validation_plot
#plot
validation_plot <- ggplot(main_plot_df, aes(x = Predicted, y = Observed, color = abs(Observed-Predicted))) +
geom_point(size = 5, alpha = .65, shape = 16) +
geom_smooth(method = "lm", color = "black", linetype = "solid", se = FALSE)+
geom_abline(slope = 1, intercept = 0, linetype = "dashed") +
scale_color_viridis(option = "mako", direction=1)+
facet_wrap(~ Species) +
theme_bw(base_family = "Times New Roman") +
scale_x_continuous(limits=c(0,2000))+
scale_y_continuous(limits=c(0,2000))+
labs(x = "Biomass Predicted", y = "Biomass Observed") +
theme(axis.text = element_text(color = "black", size = 14),
axis.text.x = element_text(color = "black", size = 14),
plot.title = element_text(color = "black", size = 20),
axis.title.y = element_text(color = "black", size = 18),
axis.title.x = element_text(color = "black", size = 18, vjust = -.25),
strip.text = element_text(color = "black", size = 13),
legend.position = "none",
panel.grid.major = element_line(color = "gray70", linewidth = .25),
panel.grid.minor = element_blank())
validation_plot
#plot
validation_plot <- ggplot(main_plot_df, aes(x = Predicted, y = Observed, color = abs(Observed-Predicted))) +
geom_point(size = 5, alpha = .5, shape = 16) +
geom_smooth(method = "lm", color = "black", linetype = "solid", se = FALSE)+
geom_abline(slope = 1, intercept = 0, linetype = "dashed") +
scale_color_viridis(option = "mako", direction=1)+
facet_wrap(~ Species) +
theme_bw(base_family = "Times New Roman") +
scale_x_continuous(limits=c(0,2000))+
scale_y_continuous(limits=c(0,2000))+
labs(x = "Biomass Predicted", y = "Biomass Observed") +
theme(axis.text = element_text(color = "black", size = 14),
axis.text.x = element_text(color = "black", size = 14),
plot.title = element_text(color = "black", size = 20),
axis.title.y = element_text(color = "black", size = 18),
axis.title.x = element_text(color = "black", size = 18, vjust = -.25),
strip.text = element_text(color = "black", size = 13),
legend.position = "none",
panel.grid.major = element_line(color = "gray70", linewidth = .25),
panel.grid.minor = element_blank())
validation_plot
#plot
validation_plot <- ggplot(main_plot_df, aes(x = Predicted, y = Observed, color = abs(Observed-Predicted))) +
geom_point(size = 5, alpha = .5, shape = 16) +
geom_smooth(method = "lm", color = "black", linetype = "solid", se = FALSE)+
geom_abline(slope = 1, intercept = 0, linetype = "dashed") +
scale_color_viridis(option = "inferno", direction=1)+
facet_wrap(~ Species) +
theme_bw(base_family = "Times New Roman") +
scale_x_continuous(limits=c(0,2000))+
scale_y_continuous(limits=c(0,2000))+
labs(x = "Biomass Predicted", y = "Biomass Observed") +
theme(axis.text = element_text(color = "black", size = 14),
axis.text.x = element_text(color = "black", size = 14),
plot.title = element_text(color = "black", size = 20),
axis.title.y = element_text(color = "black", size = 18),
axis.title.x = element_text(color = "black", size = 18, vjust = -.25),
strip.text = element_text(color = "black", size = 13),
legend.position = "none",
panel.grid.major = element_line(color = "gray70", linewidth = .25),
panel.grid.minor = element_blank())
validation_plot
#plot
validation_plot <- ggplot(main_plot_df, aes(x = Predicted, y = Observed, color = abs(Observed-Predicted))) +
geom_point(size = 5, alpha = .5, shape = 16) +
geom_smooth(method = "lm", color = "black", linetype = "solid", se = FALSE)+
geom_abline(slope = 1, intercept = 0, linetype = "dashed") +
scale_color_viridis(option = "inferno", direction=-1)+
facet_wrap(~ Species) +
theme_bw(base_family = "Times New Roman") +
scale_x_continuous(limits=c(0,2000))+
scale_y_continuous(limits=c(0,2000))+
labs(x = "Biomass Predicted", y = "Biomass Observed") +
theme(axis.text = element_text(color = "black", size = 14),
axis.text.x = element_text(color = "black", size = 14),
plot.title = element_text(color = "black", size = 20),
axis.title.y = element_text(color = "black", size = 18),
axis.title.x = element_text(color = "black", size = 18, vjust = -.25),
strip.text = element_text(color = "black", size = 13),
legend.position = "none",
panel.grid.major = element_line(color = "gray70", linewidth = .25),
panel.grid.minor = element_blank())
validation_plot
#plot
validation_plot <- ggplot(main_plot_df, aes(x = Predicted, y = Observed, color = abs(Observed-Predicted))) +
geom_point(size = 5, alpha = .5, shape = 16) +
geom_smooth(method = "lm", color = "black", linetype = "solid", se = FALSE)+
geom_abline(slope = 1, intercept = 0, linetype = "dashed") +
scale_color_viridis(option = "magma", direction=-1)+
facet_wrap(~ Species) +
theme_bw(base_family = "Times New Roman") +
scale_x_continuous(limits=c(0,2000))+
scale_y_continuous(limits=c(0,2000))+
labs(x = "Biomass Predicted", y = "Biomass Observed") +
theme(axis.text = element_text(color = "black", size = 14),
axis.text.x = element_text(color = "black", size = 14),
plot.title = element_text(color = "black", size = 20),
axis.title.y = element_text(color = "black", size = 18),
axis.title.x = element_text(color = "black", size = 18, vjust = -.25),
strip.text = element_text(color = "black", size = 13),
legend.position = "none",
panel.grid.major = element_line(color = "gray70", linewidth = .25),
panel.grid.minor = element_blank())
validation_plot
#plot
validation_plot <- ggplot(main_plot_df, aes(x = Predicted, y = Observed, color = abs(Observed-Predicted))) +
geom_point(size = 5, alpha = .5, shape = 16) +
geom_smooth(method = "lm", color = "black", linetype = "solid", se = FALSE)+
geom_abline(slope = 1, intercept = 0, linetype = "dashed") +
scale_color_viridis(option = "turbo", direction=-1)+
facet_wrap(~ Species) +
theme_bw(base_family = "Times New Roman") +
scale_x_continuous(limits=c(0,2000))+
scale_y_continuous(limits=c(0,2000))+
labs(x = "Biomass Predicted", y = "Biomass Observed") +
theme(axis.text = element_text(color = "black", size = 14),
axis.text.x = element_text(color = "black", size = 14),
plot.title = element_text(color = "black", size = 20),
axis.title.y = element_text(color = "black", size = 18),
axis.title.x = element_text(color = "black", size = 18, vjust = -.25),
strip.text = element_text(color = "black", size = 13),
legend.position = "none",
panel.grid.major = element_line(color = "gray70", linewidth = .25),
panel.grid.minor = element_blank())
validation_plot
#plot
validation_plot <- ggplot(main_plot_df, aes(x = Predicted, y = Observed, color = abs(Observed-Predicted))) +
geom_point(size = 5, alpha = .5, shape = 16) +
geom_smooth(method = "lm", color = "black", linetype = "solid", se = FALSE)+
geom_abline(slope = 1, intercept = 0, linetype = "dashed") +
scale_color_viridis(option = "turbo", direction=1)+
facet_wrap(~ Species) +
theme_bw(base_family = "Times New Roman") +
scale_x_continuous(limits=c(0,2000))+
scale_y_continuous(limits=c(0,2000))+
labs(x = "Biomass Predicted", y = "Biomass Observed") +
theme(axis.text = element_text(color = "black", size = 14),
axis.text.x = element_text(color = "black", size = 14),
plot.title = element_text(color = "black", size = 20),
axis.title.y = element_text(color = "black", size = 18),
axis.title.x = element_text(color = "black", size = 18, vjust = -.25),
strip.text = element_text(color = "black", size = 13),
legend.position = "none",
panel.grid.major = element_line(color = "gray70", linewidth = .25),
panel.grid.minor = element_blank())
validation_plot
#plot
validation_plot <- ggplot(main_plot_df, aes(x = Predicted, y = Observed, color = abs(Observed-Predicted))) +
geom_point(size = 5, alpha = .5, shape = 16) +
geom_smooth(method = "lm", color = "black", linetype = "solid", se = FALSE)+
geom_abline(slope = 1, intercept = 0, linetype = "dashed") +
scale_color_viridis(option = "viridis", direction=1)+
facet_wrap(~ Species) +
theme_bw(base_family = "Times New Roman") +
scale_x_continuous(limits=c(0,2000))+
scale_y_continuous(limits=c(0,2000))+
labs(x = "Biomass Predicted", y = "Biomass Observed") +
theme(axis.text = element_text(color = "black", size = 14),
axis.text.x = element_text(color = "black", size = 14),
plot.title = element_text(color = "black", size = 20),
axis.title.y = element_text(color = "black", size = 18),
axis.title.x = element_text(color = "black", size = 18, vjust = -.25),
strip.text = element_text(color = "black", size = 13),
legend.position = "none",
panel.grid.major = element_line(color = "gray70", linewidth = .25),
panel.grid.minor = element_blank())
validation_plot
